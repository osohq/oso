{{ $file := .Get "file" }}
{{ $codeLang := "" }}
{{ $suffix := findRE "(\\.[^.]+)$" $file 1 }}
{{ with  $suffix }}
{{ $codeLang = (index . 0 | strings.TrimPrefix ".") }}
{{ end }}
{{ with .Get "codeLang" }}{{ $codeLang = . }}{{ end }}
<div class="code" id="{{ $file | urlize}}">
<div class="code" {{with .Get "download"}}id="{{.}}"{{end}}>
{{- with $file -}}
<div class="filename rounded-md bg-gray-200 text-gray-700 text-sm pl-1 py-1">
{{- with $codeLang -}}
{{- partial "fontawesome.html" $codeLang -}}
{{- end -}}
{{- . -}}</div>
{{ end }}
{{ if  .Get "nocode" }}
{{ trim $.Inner " \n" }}
{{ else }}
{{ with $codeLang }}
{{- highlight (trim $.Inner " \n") . "" -}}
{{ else }}
<pre><code>{{- .Inner | string -}}</code></pre>{{ end }}{{ end }}
</div>
</div>
